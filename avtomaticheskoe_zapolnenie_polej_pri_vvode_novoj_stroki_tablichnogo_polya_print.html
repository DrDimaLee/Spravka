<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<base target="_blank" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link href="css/printed.css" media="all" rel="StyleSheet" type="text/css" />
		<link href="de_style.css" media="all" rel="StyleSheet" type="text/css" />
		<meta name="generator" content="www.DrExplain.com" />
				<title>1.2.1.4. &#x0410;&#x0432;&#x0442;&#x043E;&#x043C;&#x0430;&#x0442;&#x0438;&#x0447;&#x0435;&#x0441;&#x043A;&#x043E;&#x0435; &#x0437;&#x0430;&#x043F;&#x043E;&#x043B;&#x043D;&#x0435;&#x043D;&#x0438;&#x0435; &#x043F;&#x043E;&#x043B;&#x0435;&#x0439; &#x043F;&#x0440;&#x0438; &#x0432;&#x0432;&#x043E;&#x0434;&#x0435; &#x043D;&#x043E;&#x0432;&#x043E;&#x0439; &#x0441;&#x0442;&#x0440;&#x043E;&#x043A;&#x0438; &#x0442;&#x0430;&#x0431;&#x043B;&#x0438;&#x0447;&#x043D;&#x043E;&#x0433;&#x043E; &#x043F;&#x043E;&#x043B;&#x044F;</title>
	</head>
	<body>
		<table class="pagetable">
			<tr class="page" style="border-color: #ffffff;">
				<td class="page_area" style="border-color: #ffffff; width: 100%;"><div class="description_on_page"><div class="p" style="text-align: center; direction: ltr; margin-left: 0px; text-indent: 0px;"><div class="ic"><h1><strong>1.2.1.4. Автоматическое заполнение полей при вводе новой строки табличного поля</strong></h1></div></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><span class="de_C3917CD988">При добавлении в табличное поле новой строки может возникнуть ситуация, когда необходимо заполнить некоторые поля новой строки значениями по умолчанию. Для этого следует использовать событие <strong>ПриНачалеРедактирования()</strong> табличного поля. Обработчик данного события вызывается при начале редактирования старой или добавленной строки табличного поля и имеет параметры <strong>НоваяСтрока</strong> и <strong>Копирование</strong>. Параметр <strong>НоваяСтрока</strong> указывает, что происходит редактирование новой строки, а параметр <strong>Копирование</strong> указывает, что происходит копирование строки.</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><span class="de_C3917CD988">Поясним использование обработчика данного события на следующем примере. Пусть существует форма документа ПриходнаяНакладная, содержащая табличную часть Состав. Данная табличная часть содержит реквизит СтавкаНДС, являющийся ссылкой на перечисление СтавкиНДС. Требуется при добавлении новой строки устанавливать значение данного реквизита равным 18%.</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="534" height="325" class=" de_780D01ADE8" src="drex_avtomaticheskoe_zapolnenie_polej_pri_vvode_novoj_stroki_tablichnogo_polya_custom.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><span class="de_C3917CD988">Для решения данной задачи используем событие <strong>ПриНачалеРедактирования()</strong> табличного поля. Первым параметром данного события является элемент управления, инициировавший данное событие, т.е. табличное поле. Для обращения к полям новой строки воспользуемся свойством <strong>ТекущиеДанные</strong> табличного поля. Это свойство содержит коллекцию значений текущей строки табличного поля, соответствующую коллекции колонок отображаемого табличным полем списка. Поэтому значение НДС по умолчанию необходимо присвоить элементу с именем СтавкаНДС данной коллекции.  При этом необходимо учитывать, что значение ставки НДС необходимо устанавливать только в случае добавления новой строки, а не копирования или редактирования старой строки, для чего в обработчике события анализируются значения параметров <strong>НоваяСтрока</strong> и <strong>Копирование</strong>.</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><a href="javascript:"><span class="de_96F0909776">Копировать в буфер обмена</span></a></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 10px; text-indent: 0px;"><table class="de_tbl_566 detbl" style="width: 100%; margin-left: 0; margin-right: auto;">
<col style="width: 100%;" class="de_col_1_566" />
<tr style="height: 0px;">
<td class="de_td_566" style = "padding: 2px; padding-bottom: 1px; border-left-style: none; border-left-width: 3px; border-left-color: #0000ff; border-right-style: none; border-right-width: 3px; border-right-color: #0000ff; border-top-style: none; border-top-width: 3px; border-top-color: #0000ff; border-bottom-style: none; border-bottom-width: 3px; border-bottom-color: #0000ff;  width: 100%; vertical-align: top; background-color: #f0f0f0;" colspan = "1" rowspan = "1" >
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><span class="de_EAEC673B3E">Процедура</span><span class="de_8A030B40E6"> СоставПриНачалеРедактирования</span><span class="de_EAEC673B3E">(</span><span class="de_8A030B40E6">Элемент</span><span class="de_EAEC673B3E">,</span><span class="de_8A030B40E6"> НоваяСтрока</span><span class="de_EAEC673B3E">,</span><span class="de_8A030B40E6"> Копирование</span><span class="de_EAEC673B3E">)</span><span class="de_8A030B40E6">&#160; &#160; </span><span class="de_1381ACE11F">// Заполнение поля СтавкаНДС значением по умолчанию.</span><span class="de_8A030B40E6">&#160; &#160; </span><span class="de_EAEC673B3E">Если</span><span class="de_8A030B40E6"> НоваяСтрока </span><span class="de_EAEC673B3E">И</span><span class="de_8A030B40E6"> </span><span class="de_EAEC673B3E">Не</span><span class="de_8A030B40E6"> Копирование </span><span class="de_EAEC673B3E">Тогда</span><span class="de_8A030B40E6">&#160; &#160; &#160; &#160; Элемент</span><span class="de_EAEC673B3E">.</span><span class="de_8A030B40E6">ТекущиеДанные</span><span class="de_EAEC673B3E">.</span><span class="de_8A030B40E6">СтавкаНДС </span><span class="de_EAEC673B3E">=</span><span class="de_8A030B40E6"> Перечисления</span><span class="de_EAEC673B3E">.</span><span class="de_8A030B40E6">СтавкиНДС</span><span class="de_EAEC673B3E">.</span><span class="de_8A030B40E6">НДС18</span><span class="de_EAEC673B3E">;</span><span class="de_8A030B40E6">&#160; &#160; </span><span class="de_EAEC673B3E">КонецЕсли;КонецПроцедуры</span></div>
</td></tr></table></div>
</div>				</td>
			</tr>
		</table>
	</body>
</html>